import{s as we,c as ue,u as fe,g as he,a as pe,r as xe,f as Ie,e as ke,h as Ee,n as Y}from"../chunks/scheduler.DviErbFD.js";import{S as Ce,i as ye,e as m,s as E,c as v,d as j,h as D,g as b,o as r,j as F,k as a,y as z,z as De,t as ne,a as oe,A as je,u as Ne,B as H,v as Me,C as Z,w as Be,D as Ue,x as Ae,b as ee,f as te,l as le}from"../chunks/index.ByO29dwQ.js";function me(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}const qe=l=>({}),ve=l=>({});function Se(l){let e,t,o,i,s,n,f,k;const h=l[3].header,d=ue(h,l,l[2],ve),N=l[3].default,p=ue(N,l,l[2],null);return{c(){e=m("dialog"),t=m("div"),d&&d.c(),o=E(),i=m("div"),s=E(),p&&p.c(),this.h()},l(c){e=v(c,"DIALOG",{class:!0});var C=j(e);t=v(C,"DIV",{class:!0});var y=j(t);d&&d.l(y),o=D(y),i=v(y,"DIV",{class:!0}),j(i).forEach(b),s=D(y),p&&p.l(y),y.forEach(b),C.forEach(b),this.h()},h(){r(i,"class","h-[1px] w-full bg-gray-400 mt-1 mb-1"),r(t,"class","flex flex-col bg-gray-200 svelte-1dp5n4f"),r(e,"class","w-1/2 svelte-1dp5n4f")},m(c,C){F(c,e,C),a(e,t),d&&d.m(t,null),a(t,o),a(t,i),a(t,s),p&&p.m(t,null),l[5](e),n=!0,f||(k=[z(t,"click",De(l[4])),z(e,"close",l[6])],f=!0)},p(c,[C]){d&&d.p&&(!n||C&4)&&fe(d,h,c,c[2],n?pe(h,c[2],C,qe):he(c[2]),ve),p&&p.p&&(!n||C&4)&&fe(p,N,c,c[2],n?pe(N,c[2],C,null):he(c[2]),null)},i(c){n||(ne(d,c),ne(p,c),n=!0)},o(c){oe(d,c),oe(p,c),n=!1},d(c){c&&b(e),d&&d.d(c),p&&p.d(c),l[5](null),f=!1,xe(k)}}}function Ve(l,e,t){let{$$slots:o={},$$scope:i}=e,{showModal:s}=e,n;function f(d){Ie.call(this,l,d)}function k(d){ke[d?"unshift":"push"](()=>{n=d,t(1,n)})}const h=()=>t(0,s=!1);return l.$$set=d=>{"showModal"in d&&t(0,s=d.showModal),"$$scope"in d&&t(2,i=d.$$scope)},l.$$.update=()=>{l.$$.dirty&3&&!s&&n&&n.close(),l.$$.dirty&3&&n&&s&&n.showModal()},[s,n,i,o,f,k,h]}class Le extends Ce{constructor(e){super(),ye(this,e,Ve,Se,we,{showModal:0})}}function be(l,e,t){const o=l.slice();return o[13]=e[t],o}function Oe(l){let e,t="Authenticate",o,i;return{c(){e=m("button"),e.textContent=t,this.h()},l(s){e=v(s,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1ggwlen"&&(e.textContent=t),this.h()},h(){r(e,"class","pt-2 pb-2 pl-4 pr-4 bg-green-800 text-white")},m(s,n){F(s,e,n),o||(i=z(e,"click",l[6]),o=!0)},p:Y,d(s){s&&b(e),o=!1,i()}}}function He(l){let e,t="Authenticated";return{c(){e=m("div"),e.textContent=t,this.h()},l(o){e=v(o,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-mwtsxj"&&(e.textContent=t),this.h()},h(){r(e,"class","text-green-800 text-bold border-2 rounded-md border-green-800 h-full flex flex-row items-center justify-center pl-4 pr-4")},m(o,i){F(o,e,i)},p:Y,d(o){o&&b(e)}}}function _e(l){let e,t="Add Task",o,i;return{c(){e=m("button"),e.textContent=t,this.h()},l(s){e=v(s,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-guvsbc"&&(e.textContent=t),this.h()},h(){r(e,"class","pt-2 pb-2 pl-4 pr-4 bg-green-800 text-white")},m(s,n){F(s,e,n),o||(i=z(e,"click",l[9]),o=!0)},p:Y,d(s){s&&b(e),o=!1,i()}}}function ge(l){let e,t,o,i=l[13].jobId+"",s,n,f,k=l[13].taskName+"",h,d,N,p=l[13].files+"",c,C,y,x=l[13].status+"",I,_,A,S="View",B;return{c(){e=m("tbody"),t=m("tr"),o=m("td"),s=ee(i),n=E(),f=m("td"),h=ee(k),d=E(),N=m("td"),c=ee(p),C=E(),y=m("td"),I=ee(x),_=E(),A=m("td"),A.textContent=S,B=E(),this.h()},l(g){e=v(g,"TBODY",{class:!0});var w=j(e);t=v(w,"TR",{class:!0});var M=j(t);o=v(M,"TD",{class:!0});var J=j(o);s=te(J,i),J.forEach(b),n=D(M),f=v(M,"TD",{class:!0});var O=j(f);h=te(O,k),O.forEach(b),d=D(M),N=v(M,"TD",{class:!0});var W=j(N);c=te(W,p),W.forEach(b),C=D(M),y=v(M,"TD",{class:!0});var R=j(y);I=te(R,x),R.forEach(b),_=D(M),A=v(M,"TD",{class:!0,"data-svelte-h":!0}),H(A)!=="svelte-1nj550c"&&(A.textContent=S),M.forEach(b),B=D(w),w.forEach(b),this.h()},h(){r(o,"class","pl-2 pr-2 pt-1 pb-1"),r(f,"class","pl-2 pr-2 pt-1 pb-1"),r(N,"class","pl-2 pr-2 pt-1 pb-1"),r(y,"class","pl-2 pr-2 pt-1 pb-1"),r(A,"class","pl-2 pr-2 pt-1 pb-1"),r(t,"class","svelte-1sq09sd"),r(e,"class","h-[30px] svelte-1sq09sd")},m(g,w){F(g,e,w),a(e,t),a(t,o),a(o,s),a(t,n),a(t,f),a(f,h),a(t,d),a(t,N),a(N,c),a(t,C),a(t,y),a(y,I),a(t,_),a(t,A),a(e,B)},p(g,w){w&1&&i!==(i=g[13].jobId+"")&&le(s,i),w&1&&k!==(k=g[13].taskName+"")&&le(h,k),w&1&&p!==(p=g[13].files+"")&&le(c,p),w&1&&x!==(x=g[13].status+"")&&le(I,x)},d(g){g&&b(e)}}}function Pe(l){let e,t,o="Job Name",i,s,n,f,k,h,d='<label for="fileUpload" class="flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"><div class="flex flex-col items-center justify-center pt-5 pb-6"><svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg> <p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span> or drag and drop</p> <p class="text-xs text-gray-500 dark:text-gray-400">2 files (One .USD and .JSON)</p></div> <input id="fileUpload" type="file" class="hidden" name="fileUpload" accept=".json, .usd" multiple=""/></label>',N,p,c,C="Add Task",y,x;return{c(){e=m("div"),t=m("label"),t.textContent=o,i=E(),s=m("input"),n=E(),f=m("label"),k=E(),h=m("div"),h.innerHTML=d,N=E(),p=m("div"),c=m("button"),c.textContent=C,this.h()},l(I){e=v(I,"DIV",{class:!0});var _=j(e);t=v(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(t)!=="svelte-10hlc1z"&&(t.textContent=o),i=D(_),s=v(_,"INPUT",{placeholder:!0,id:!0,class:!0}),n=D(_),f=v(_,"LABEL",{for:!0,class:!0}),j(f).forEach(b),k=D(_),h=v(_,"DIV",{class:!0,"data-svelte-h":!0}),H(h)!=="svelte-q8i3rt"&&(h.innerHTML=d),N=D(_),p=v(_,"DIV",{class:!0});var A=j(p);c=v(A,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),H(c)!=="svelte-1ensx1p"&&(c.textContent=C),A.forEach(b),_.forEach(b),this.h()},h(){r(t,"for","taskName"),r(t,"class","mb-2"),r(s,"placeholder","Task Name"),r(s,"id","taskName"),r(s,"class","pt-2 pb-2 pl-4 pr-4 rounded-sm"),r(f,"for","fileUpload"),r(f,"class","mt-3 mb-2"),r(h,"class","flex items-center justify-center w-full"),r(c,"id","addTaskButton"),r(c,"class","button pt-2 pb-2 w-full text-white bg-green-800 rounded-md svelte-1sq09sd"),r(p,"class","flex flex-row justify-end mt-4"),r(e,"class","flex flex-col pt-4 pb-4")},m(I,_){F(I,e,_),a(e,t),a(e,i),a(e,s),a(e,n),a(e,f),a(e,k),a(e,h),a(e,N),a(e,p),a(p,c),y||(x=z(c,"click",l[5]),y=!0)},p:Y,d(I){I&&b(e),y=!1,x()}}}function Je(l){let e,t,o="New Task",i,s,n="close",f,k;return{c(){e=m("div"),t=m("h2"),t.textContent=o,i=E(),s=m("button"),s.textContent=n,this.h()},l(h){e=v(h,"DIV",{slot:!0,class:!0});var d=j(e);t=v(d,"H2",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-vwifd9"&&(t.textContent=o),i=D(d),s=v(d,"BUTTON",{class:!0,"data-svelte-h":!0}),H(s)!=="svelte-1d8eh0b"&&(s.textContent=n),d.forEach(b),this.h()},h(){r(t,"class","pb-2 pt-2 font-medium"),r(s,"class","h-[30px] text-red-500"),r(e,"slot","header"),r(e,"class","flex flex-row flex-1 justify-between items-center")},m(h,d){F(h,e,d),a(e,t),a(e,i),a(e,s),f||(k=z(s,"click",l[10]),f=!0)},p:Y,d(h){h&&b(e),f=!1,k()}}}function Fe(l){let e,t,o="Client Details",i,s,n,f,k,h,d,N,p,c,C,y,x,I,_="Tasks",A,S,B,g,w='<th class="pl-2 pr-2 pt-1 pb-1 svelte-1sq09sd">Job ID</th> <th class="pl-2 pr-2 pt-1 pb-1 svelte-1sq09sd">Job Name</th> <th class="pl-2 pr-2 pt-1 pb-1 svelte-1sq09sd">Files</th> <th class="pl-2 pr-2 pt-1 pb-1 svelte-1sq09sd">Status</th> <th class="pl-2 pr-2 pt-1 pb-1 svelte-1sq09sd">Results</th>',M,J,O,W,R,se,re;function ie(u,T){return u[4]?He:Oe}let $=ie(l),P=$(l),V=l[4]&&_e(l),G=me(l[0]),q=[];for(let u=0;u<G.length;u+=1)q[u]=ge(be(l,G,u));function Te(u){l[11](u)}let de={class:"w-1/2",$$slots:{header:[Je],default:[Pe]},$$scope:{ctx:l}};return l[3]!==void 0&&(de.showModal=l[3]),O=new Le({props:de}),ke.push(()=>je(O,"showModal",Te)),{c(){e=m("div"),t=m("h1"),t.textContent=o,i=E(),s=m("div"),n=m("div"),f=m("input"),k=E(),h=m("input"),d=E(),P.c(),N=E(),p=m("div"),V&&V.c(),c=E(),C=m("div"),y=E(),x=m("div"),I=m("h1"),I.textContent=_,A=E(),S=m("div"),B=m("table"),g=m("thead"),g.innerHTML=w,M=E();for(let u=0;u<q.length;u+=1)q[u].c();J=E(),Ne(O.$$.fragment),this.h()},l(u){e=v(u,"DIV",{class:!0});var T=j(e);t=v(T,"H1",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-14dd60t"&&(t.textContent=o),i=D(T),s=v(T,"DIV",{class:!0});var L=j(s);n=v(L,"DIV",{class:!0});var U=j(n);f=v(U,"INPUT",{placeholder:!0,class:!0}),k=D(U),h=v(U,"INPUT",{type:!0,placeholder:!0,class:!0}),d=D(U),P.l(U),U.forEach(b),N=D(L),p=v(L,"DIV",{class:!0});var Q=j(p);V&&V.l(Q),Q.forEach(b),L.forEach(b),c=D(T),C=v(T,"DIV",{class:!0}),j(C).forEach(b),y=D(T),x=v(T,"DIV",{class:!0});var K=j(x);I=v(K,"H1",{class:!0,"data-svelte-h":!0}),H(I)!=="svelte-1xjxcoy"&&(I.textContent=_),A=D(K),S=v(K,"DIV",{id:!0,class:!0});var ce=j(S);B=v(ce,"TABLE",{class:!0});var X=j(B);g=v(X,"THEAD",{class:!0,"data-svelte-h":!0}),H(g)!=="svelte-1yyogpi"&&(g.innerHTML=w),M=D(X);for(let ae=0;ae<q.length;ae+=1)q[ae].l(X);X.forEach(b),ce.forEach(b),K.forEach(b),T.forEach(b),J=D(u),Me(O.$$.fragment,u),this.h()},h(){r(t,"class","pt-4 pb-4 font-medium"),r(f,"placeholder","Client ID"),r(f,"class","pt-2 pb-2 pl-4 pr-4 rounded-sm"),r(h,"type","password"),r(h,"placeholder","Client Secret"),r(h,"class","pt-2 pb-2 pl-4 pr-4 rounded-sm ml-2"),r(n,"class","flex row gap-2 items-center"),r(p,"class","flex row spacing-1"),r(s,"class","flex row grow-0 justify-between align-center"),r(C,"class","h-[1px] w-full bg-gray-400 mt-4 mb-4 grow-0"),r(I,"class","pt-4 pb-2 font-medium"),r(g,"class","h-[40px] bg-gray-400 border-gray-200 pt-4 pb-4 svelte-1sq09sd"),r(B,"class","w-full table-auto"),r(S,"id","table"),r(S,"class","flex-grow flex flex-col bg-gray-300 svelte-1sq09sd"),r(x,"class","flex flex-col flex-grow grow overflow-auto"),r(e,"class","flex flex-1 flex-col bg-gray-200 m-6 rounded-md p-8")},m(u,T){F(u,e,T),a(e,t),a(e,i),a(e,s),a(s,n),a(n,f),Z(f,l[1]),a(n,k),a(n,h),Z(h,l[2]),a(n,d),P.m(n,null),a(s,N),a(s,p),V&&V.m(p,null),a(e,c),a(e,C),a(e,y),a(e,x),a(x,I),a(x,A),a(x,S),a(S,B),a(B,g),a(B,M);for(let L=0;L<q.length;L+=1)q[L]&&q[L].m(B,null);F(u,J,T),Be(O,u,T),R=!0,se||(re=[z(f,"input",l[7]),z(h,"input",l[8])],se=!0)},p(u,[T]){if(T&2&&f.value!==u[1]&&Z(f,u[1]),T&4&&h.value!==u[2]&&Z(h,u[2]),$===($=ie(u))&&P?P.p(u,T):(P.d(1),P=$(u),P&&(P.c(),P.m(n,null))),u[4]?V?V.p(u,T):(V=_e(u),V.c(),V.m(p,null)):V&&(V.d(1),V=null),T&1){G=me(u[0]);let U;for(U=0;U<G.length;U+=1){const Q=be(u,G,U);q[U]?q[U].p(Q,T):(q[U]=ge(Q),q[U].c(),q[U].m(B,null))}for(;U<q.length;U+=1)q[U].d(1);q.length=G.length}const L={};T&65544&&(L.$$scope={dirty:T,ctx:u}),!W&&T&8&&(W=!0,L.showModal=u[3],Ee(()=>W=!1)),O.$set(L)},i(u){R||(ne(O.$$.fragment,u),R=!0)},o(u){oe(O.$$.fragment,u),R=!1},d(u){u&&(b(e),b(J)),P.d(),V&&V.d(),Ue(q,u),Ae(O,u),se=!1,xe(re)}}}function ze(l){const e=document.getElementById("taskName").value;if(e===null||e.length===0)return alert("Task job is required"),l.preventDefault(),!1;const t=document.getElementById("fileUpload").files;let o=!1,i=!1;if(t.length!==2)return alert("Please select exactly two files: one .json and one .usd"),l.preventDefault(),!1;for(let s=0;s<t.length;s++){const n=t[s];n.name.endsWith(".json")?o=!0:n.name.endsWith(".usd")&&(i=!0)}return!o||!i?(alert("Please select one .json file and one .usd file."),l.preventDefault(),!1):!0}function Re(l,e,t){let o=[],i="",s="",n="",f=!1,k=!1;async function h(){if(ze()){const _=document.getElementById("addTaskButton");_.disabled=!0,_.innerHTML='Processing... <div class="spinner"></div>',document.getElementById("fileUpload");const A=document.getElementById("fileUpload"),S=document.getElementById("taskName").value;let B=[];const g=new FormData;for(const w of A.files)B.push(w.name),g.append("taskFiles",w);g.append("taskName",S);try{const w=await fetch("http://127.0.0.1:3000/task",{method:"POST",body:g,headers:{Authorization:`Bearer ${n}`}});if(!w.ok)throw new Error("Network response was not ok "+w.statusText);const M=await w.json();console.log(M);var x={jobId:M.jobId,queueId:M.queueId,taskName:S,files:B,status:"QUEUED"};t(0,o=[...o,x]);const J=setInterval(()=>{I(M.jobId,M.queueId,J)},5e3)}catch(w){alert("There has been a problem with your fetch operation:",w),console.error("There has been a problem with your fetch operation:",w)}_.disabled=!1,_.innerHTML="Add Task"}async function I(_,A,S){const B=await fetch("http://127.0.0.1:3000/status",{method:"POST",body:JSON.stringify({jobId:_,queueId:A}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});if(!B.ok)alert("Check Status Failed"),clearInterval(S);else{const g=await B.json();t(0,o=o.map(w=>w.jobId===_?{...w,status:g.status}:w)),(g.status==="SUCCEEDED"||g.status==="FAILED"||g.status==="CANCELED")&&clearInterval(S)}}}async function d(){if(i===""||s===""){alert("Client ID and Secret is required");return}const x=await fetch("http://127.0.0.1:3000/login",{method:"POST",body:JSON.stringify({clientID:i,clientSecret:s}),headers:{"Content-Type":"application/json"}});if(!x.ok)console.log(x.error());else{const I=await x.json();t(4,k=!0),n=I.token}}function N(){i=this.value,t(1,i)}function p(){s=this.value,t(2,s)}const c=()=>t(3,f=!0),C=()=>{t(3,f=!1)};function y(x){f=x,t(3,f)}return[o,i,s,f,k,h,d,N,p,c,C,y]}class Qe extends Ce{constructor(e){super(),ye(this,e,Re,Fe,we,{})}}export{Qe as component};
